---
import AppLayout from "@/layouts/AppLayout.astro";
import { TaskForm } from "@/components/tasks/TaskForm";

const supabase = Astro.locals.supabase;
const {
  data: { session },
} = await supabase.auth.getSession();

if (!session) {
  return Astro.redirect("/login");
}

const token = session.access_token;
export const prerender = false;
---

<AppLayout title="Nowe zadanie - Chronos">
  <div class="flex min-h-[calc(100vh-4rem)] flex-col items-center justify-center px-4 py-12">
    <div class="w-full max-w-3xl">
      <TaskForm client:load token={token} />
    </div>
  </div>
</AppLayout>
