---
import Layout from "./Layout.astro";
import { Navbar } from "@/components/navbar";
import { navItems, resolveBreadcrumbs } from "@/lib/navigation";
import type { BreadcrumbEntry, UserProfileVM } from "@/types";

interface Props {
  title?: string;
  breadcrumbs?: BreadcrumbEntry[];
  userProfile?: UserProfileVM | null;
}

const { title = "Chronos", breadcrumbs: breadcrumbsOverride, userProfile } = Astro.props as Props;

const currentPath = new URL(Astro.request.url).pathname;

const breadcrumbs = breadcrumbsOverride ?? resolveBreadcrumbs(currentPath);
---

<Layout title={title}>
  <div class="min-h-screen bg-slate-50 text-slate-900">
    <Navbar client:idle navItems={navItems} breadcrumbs={breadcrumbs} userProfile={userProfile ?? null} />
    <main class="mx-auto flex w-full max-w-6xl flex-1 flex-col px-4 py-8">
      <slot />
    </main>
  </div>
</Layout>
